{% extends 'core/base.html' %}
{% load currency_filters %}  <!-- Carrega o filtro de moeda que criamos anteriormente -->

{% block title %}Minhas Entradas{% endblock %}

{% block extra_head %}
<style>
    .valor-positivo {
        background-color: #f0fdf4;  /* Verde claro */
        color: #166534;            /* Verde escuro */
        padding: 0.25rem 0.5rem;
        border-radius: 0.25rem;
        font-weight: 500;
    }
    
    .dark .valor-positivo {
        background-color: #052e16;  /* Verde escuro para dark mode */
        color: #bbf7d0;            /* Verde claro para dark mode */
    }
    
    .valor-negativo {
        background-color: #fef2f2;  /* Vermelho claro */
        color: #991b1b;            /* Vermelho escuro */
        padding: 0.25rem 0.5rem;
        border-radius: 0.25rem;
        font-weight: 500;
    }
    
    .dark .valor-negativo {
        background-color: #450a0a;  /* Vermelho escuro para dark mode */
        color: #fecaca;            /* Vermelho claro para dark mode */
    }
</style>
{% endblock %}

{% block content %}
    <h1 class="text-3xl font-bold text-gray-800 mb-6 dark:text-white">Minhas Entradas (Receitas)</h1>

    <a href="{% url 'core:entrada_create' %}" class="bg-green-500 hover:bg-green-700 text-white font-bold py-2 px-4 rounded mb-6 inline-block">Adicionar Nova Entrada</a>

    {% if entradas %}
        <div class="bg-white shadow-md rounded-lg overflow-hidden dark:bg-gray-800">
            <table class="min-w-full leading-normal">
                <thead>
                    <tr>
                        <th class="px-5 py-3 border-b-2 border-gray-200 bg-gray-100 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider dark:bg-gray-700 dark:text-gray-300">Conta</th>
                        <th class="px-5 py-3 border-b-2 border-gray-200 bg-gray-100 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider dark:bg-gray-700 dark:text-gray-300">Origem</th>
                        <th class="px-5 py-3 border-b-2 border-gray-200 bg-gray-100 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider dark:bg-gray-700 dark:text-gray-300">Data</th>
                        <th class="px-5 py-3 border-b-2 border-gray-200 bg-gray-100 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider dark:bg-gray-700 dark:text-gray-300">Forma de Recebimento</th>
                        <th class="px-5 py-3 border-b-2 border-gray-200 bg-gray-100 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider dark:bg-gray-700 dark:text-gray-300">Valor</th>
                        <th class="px-5 py-3 border-b-2 border-gray-200 bg-gray-100 dark:bg-gray-700"></th>
                    </tr>
                </thead>
                <tbody>
                    {% for entrada in entradas %}
                        <tr class="hover:bg-gray-50 dark:hover:bg-gray-700">

                            <td class="px-5 py-5 border-b border-gray-200 bg-white text-sm dark:bg-gray-800 dark:border-gray-700 dark:text-gray-300">
                                {{ entrada.conta_bancaria.get_nome_banco_display }}
                            </td>
                            <td class="px-5 py-5 border-b border-gray-200 bg-white text-sm dark:bg-gray-800 dark:border-gray-700 dark:text-gray-300">
                                {{ entrada.local }}
                            </td>
                            <td class="px-5 py-5 border-b border-gray-200 bg-white text-sm dark:bg-gray-800 dark:border-gray-700 dark:text-gray-300">
                                {{ entrada.data|date:"d/m/Y" }}
                            </td>
                            
                            <td class="px-5 py-5 border-b border-gray-200 bg-white text-sm dark:bg-gray-800 dark:border-gray-700 dark:text-gray-300">
                                {{ entrada.get_forma_recebimento_display }}
                            </td>
                                                        <td class="px-5 py-5 border-b border-gray-200 bg-white text-sm dark:bg-gray-800 dark:border-gray-700">
                                <span class="{% if entrada.valor >= 0 %}valor-positivo{% else %}valor-negativo{% endif %}">
                                    {{ entrada.valor|br_currency }}
                                </span>
                            </td>
                            <td class="px-5 py-5 border-b border-gray-200 bg-white text-sm text-right dark:bg-gray-800 dark:border-gray-700">
                                <a href="{% url 'core:entrada_update' entrada.pk %}" class="text-blue-600 hover:text-blue-900 mr-3 dark:text-blue-400 dark:hover:text-blue-300">Editar</a>
                                <a href="{% url 'core:entrada_delete' entrada.pk %}" class="text-red-600 hover:text-red-900 dark:text-red-400 dark:hover:text-red-300">Excluir</a>
                            </td>
                        </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>
    {% else %}
        <p class="text-gray-700 dark:text-gray-300">Você ainda não tem entradas cadastradas.</p>
    {% endif %}
{% endblock %}