<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cadastro - Finanças Pessoais</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <style>
        /* Estilos personalizados que não podem ser expressos diretamente no Tailwind */
        .finance-bg-circle {
            filter: blur(80px);
        }
        
        .glass-container {
            background-color: rgba(255, 255, 255, 0.15);
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
        }

        .finance-form-group.error .finance-input {
            border-color: #ff1744;
        }

        .finance-form-group.error .finance-error-message {
            display: block;
        }
    </style>
</head>
<body class="flex justify-center items-center min-h-screen bg-gradient-to-br from-indigo-500 to-blue-800 overflow-hidden relative text-white font-poppins">

    <div class="finance-bg-circle absolute rounded-full bg-indigo-700 w-[300px] h-[300px] top-[10%] left-[5%] opacity-60"></div>
    <div class="finance-bg-circle absolute rounded-full bg-cyan-500 w-[200px] h-[200px] top-[60%] left-[15%] opacity-60"></div>
    <div class="finance-bg-circle absolute rounded-full bg-indigo-300 w-[250px] h-[250px] top-[30%] right-[10%] opacity-60"></div>
    <div class="finance-bg-circle absolute rounded-full bg-emerald-500 w-[350px] h-[350px] bottom-[5%] right-[5%] opacity-60"></div>

    <div class="finance-register-container w-[800px] max-w-[95%] glass-container rounded-2xl shadow-2xl border border-white/20 p-12 relative overflow-hidden">
        <div class="finance-logo flex items-center justify-center gap-3 mb-8">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" class="w-10 h-10 stroke-white">
                <path d="M12 2v20M17 5H9.5a3.5 3.5 0 1 0 0 7h5a3.5 3.5 0 1 1 0 7H6"/>
            </svg>
            <h1 class="text-3xl font-semibold text-white">Finanças Pessoais</h1>
        </div>

        <div class="finance-register-header text-center mb-8">
            <h2 class="text-3xl font-semibold mb-2 text-white drop-shadow-lg">Crie sua conta</h2>
            <p class="text-base opacity-90">Comece a gerenciar suas finanças de forma inteligente</p>
        </div>

        <form method="post" class="finance-register-form flex flex-col gap-6" id="registerForm">
            {% csrf_token %}
            
            {% if form.errors %}
            <div class="bg-red-500/20 text-white border border-red-500/40 p-3 rounded-lg flex items-center gap-2 mb-4 text-sm">
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" class="w-5 h-5">
                    <path d="M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z"></path>
                    <line x1="12" y1="9" x2="12" y2="13"></line>
                    <line x1="12" y1="17" x2="12.01" y2="17"></line>
                </svg>
                <span>Por favor, corrija os erros abaixo</span>
            </div>
            {% endif %}

            <div class="finance-form-row flex gap-6 flex-col sm:flex-row">
                <div class="finance-form-group flex-1">
                    <label for="id_first_name" class="block mb-2 text-sm text-white/90 font-medium">
                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" class="w-5 h-5 stroke-white/80 mr-2 inline-block">
                            <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"></path>
                            <circle cx="12" cy="7" r="4"></circle>
                        </svg>
                        Nome
                    </label>
                    <input type="text" id="id_first_name" name="first_name" value="{{ form.first_name.value|default_if_none:'' }}" class="finance-input w-full bg-white/10 border border-white/30 rounded-lg p-3 text-white text-base backdrop-blur-sm transition-all duration-300 placeholder:text-white/60 focus:outline-none focus:border-white/50 focus:shadow-sm" required>
                    {% if form.first_name.errors %}
                    <div class="finance-error-message text-red-500 text-xs mt-1">
                        {{ form.first_name.errors.0 }}
                    </div>
                    {% endif %}
                </div>

                <div class="finance-form-group flex-1">
                    <label for="id_last_name" class="block mb-2 text-sm text-white/90 font-medium">
                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" class="w-5 h-5 stroke-white/80 mr-2 inline-block">
                            <path d="M16 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"></path>
                            <circle cx="8.5" cy="7" r="4"></circle>
                            <line x1="20" y1="8" x2="20" y2="14"></line>
                            <line x1="23" y1="11" x2="17" y2="11"></line>
                        </svg>
                        Sobrenome
                    </label>
                    <input type="text" id="id_last_name" name="last_name" value="{{ form.last_name.value|default_if_none:'' }}" class="finance-input w-full bg-white/10 border border-white/30 rounded-lg p-3 text-white text-base backdrop-blur-sm transition-all duration-300 placeholder:text-white/60 focus:outline-none focus:border-white/50 focus:shadow-sm" required>
                    {% if form.last_name.errors %}
                    <div class="finance-error-message text-red-500 text-xs mt-1">
                        {{ form.last_name.errors.0 }}
                    </div>
                    {% endif %}
                </div>
            </div>

            <div class="finance-form-group">
                <label for="id_cpf" class="block mb-2 text-sm text-white/90 font-medium">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" class="w-5 h-5 stroke-white/80 mr-2 inline-block">
                        <rect x="2" y="4" width="20" height="16" rx="2" />
                        <path d="M2 10h20M7 15h1m4 0h1m4 0h1" />
                    </svg>
                    CPF
                </label>
                <input type="text" id="id_cpf" name="cpf" value="{{ form.cpf.value|default_if_none:'' }}" class="finance-input w-full bg-white/10 border border-white/30 rounded-lg p-3 text-white text-base backdrop-blur-sm transition-all duration-300 placeholder:text-white/60 focus:outline-none focus:border-white/50 focus:shadow-sm" placeholder="000.000.000-00" required>
                {% if form.cpf.errors %}
                <div class="finance-error-message text-red-500 text-xs mt-1">
                    {{ form.cpf.errors.0 }}
                </div>
                {% endif %}
            </div>

            <div class="finance-form-group">
                <label for="id_email" class="block mb-2 text-sm text-white/90 font-medium">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" class="w-5 h-5 stroke-white/80 mr-2 inline-block">
                        <path d="M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"/>
                        <path d="M22 6l-10 7L2 6"/>
                    </svg>
                    E-mail
                </label>
                <input type="email" id="id_email" name="email" value="{{ form.email.value|default_if_none:'' }}" class="finance-input w-full bg-white/10 border border-white/30 rounded-lg p-3 text-white text-base backdrop-blur-sm transition-all duration-300 placeholder:text-white/60 focus:outline-none focus:border-white/50 focus:shadow-sm" placeholder="seu@email.com" required>
                {% if form.email.errors %}
                <div class="finance-error-message text-red-500 text-xs mt-1">
                    {{ form.email.errors.0 }}
                </div>
                {% endif %}
            </div>

            <div class="finance-form-group">
                <label for="id_data_nascimento" class="block mb-2 text-sm text-white/90 font-medium">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" class="w-5 h-5 stroke-white/80 mr-2 inline-block">
                        <rect x="3" y="4" width="18" height="18" rx="2" ry="2"/>
                        <line x1="16" y1="2" x2="16" y2="6"/>
                        <line x1="8" y1="2" x2="8" y2="6"/>
                        <line x1="3" y1="10" x2="21" y2="10"/>
                    </svg>
                    Data de Nascimento
                </label>
                <input type="date" id="id_data_nascimento" name="data_nascimento" value="{{ form.data_nascimento.value|default_if_none:'' }}" class="finance-input w-full bg-white/10 border border-white/30 rounded-lg p-3 text-white text-base backdrop-blur-sm transition-all duration-300 placeholder:text-white/60 focus:outline-none focus:border-white/50 focus:shadow-sm" required>
                {% if form.data_nascimento.errors %}
                <div class="finance-error-message text-red-500 text-xs mt-1">
                    {{ form.data_nascimento.errors.0 }}
                </div>
                {% endif %}
            </div>

            <button type="submit" class="bg-emerald-500 text-white border-0 py-3 rounded-lg text-lg font-medium cursor-pointer transition-all duration-300 mt-4 shadow-lg hover:bg-emerald-600 hover:-translate-y-0.5">
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="20" height="20" fill="none" stroke="currentColor" stroke-width="2" class="inline-block mr-2">
                    <path d="M19 21l-7-5-7 5V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2z"/>
                </svg>
                Criar conta
            </button>
        </form>

        <div class="finance-register-footer text-center mt-8">
            <p>Já tem uma conta? <a href="{% url 'accounts:login' %}" class="text-white/80 no-underline transition-colors duration-200 hover:text-white hover:underline">Faça login</a></p>
        </div>
    </div>

    <script>
        // Máscara para CPF
        document.getElementById('id_cpf').addEventListener('input', function(e) {
            let value = e.target.value.replace(/\D/g, '');
            
            if (value.length > 3) {
                value = value.replace(/^(\d{3})/, '$1.');
            }
            if (value.length > 7) {
                value = value.replace(/^(\d{3})\.(\d{3})/, '$1.$2.');
            }
            if (value.length > 11) {
                value = value.replace(/^(\d{3})\.(\d{3})\.(\d{3})/, '$1.$2.$3-');
            }
            
            e.target.value = value.substring(0, 14);
        });

        // Validação em tempo real
        document.querySelectorAll('.finance-input').forEach(input => {
            input.addEventListener('blur', function() {
                const formGroup = this.closest('.finance-form-group');
                if (this.value.trim() === '') {
                    formGroup.classList.add('error');
                } else {
                    formGroup.classList.remove('error');
                }
            });
        });

        // Validação ao enviar o formulário
        document.getElementById('registerForm').addEventListener('submit', function(e) {
            let isValid = true;
            
            document.querySelectorAll('.finance-input[required]').forEach(input => {
                if (input.value.trim() === '') {
                    input.closest('.finance-form-group').classList.add('error');
                    isValid = false;
                }
            });
            
            if (!isValid) {
                e.preventDefault();
                const firstError = document.querySelector('.finance-form-group.error');
                if (firstError) {
                    firstError.scrollIntoView({
                        behavior: 'smooth',
                        block: 'center'
                    });
                }
            }
        });
    </script>
</body>
</html>